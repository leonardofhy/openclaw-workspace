{"date": "2026-02-28", "category": "gotcha", "priority": "high", "status": "resolved", "summary": "srun doesn't inherit conda activate", "details": "Must use full path ~/miniforge3/envs/interp/bin/python3", "action": "Documented in TOOLS.md and L-03-GPU-ENV.md", "pattern_key": "srun.conda_not_inherited", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-001"}
{"date": "2026-02-28", "category": "gotcha", "priority": "high", "status": "pending", "summary": "openclaw config: never edit JSON directly", "details": "openclaw.json validation clears unknown keys on restart", "action": "Always use 'openclaw config set' CLI", "pattern_key": "config.direct_edit_fails", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-002"}
{"date": "2026-02-28", "category": "best_practice", "priority": "medium", "status": "pending", "summary": "Use find_workspace() not fragile .parent chains", "details": "Path(__file__).parent.parent... breaks when script depth changes", "action": "Import find_workspace() from shared.jsonl_store", "pattern_key": "path.fragile_parent_chain", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-003"}
{"date": "2026-02-28", "category": "gotcha", "priority": "medium", "status": "pending", "summary": "task-board.md: completed tasks must be in DONE section", "details": "Putting âœ… in ACTIVE title doesn't work for task-check.py parser", "action": "Physically move task entries to ## DONE section", "pattern_key": "taskboard.done_section_required", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-004"}
{"date": "2026-02-28", "category": "gotcha", "priority": "medium", "status": "pending", "summary": "Gateway restart from inside session kills connection", "details": "Restarting gateway disconnects the WebSocket session that issued the command", "action": "Use nohup with sleep delay, or ask Leo to restart manually", "pattern_key": "gateway.restart_kills_session", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-005"}
{"date": "2026-02-28", "category": "best_practice", "priority": "medium", "status": "pending", "summary": "trash > rm for destructive operations", "details": "rm -rf skills/memory deleted entire skill; git restore saved us", "action": "Always use trash command; ls before rm; target specific subdirs", "pattern_key": "safety.use_trash_not_rm", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-006"}
{"date": "2026-02-28", "category": "gotcha", "priority": "high", "status": "pending", "summary": "message tool needs channel ID, not user ID for Discord", "details": "Using user ID 756053339913060392 as target returns 'Unknown Channel'. Must use channel ID like 978709248978599979 (#general)", "action": "Always use Discord channel IDs for message tool target, not user IDs", "pattern_key": "discord.target_needs_channel_id", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-007"}
{"date": "2026-02-28", "category": "gotcha", "priority": "high", "status": "pending", "summary": "openclaw doctor from active session triggers transcript repair error", "details": "Running openclaw CLI commands that interact with gateway from within a session causes '[openclaw] missing tool result in session history' errors", "action": "Use openclaw doctor only in isolated cron sessions, not main session. Scanner fallback to info-level skip.", "pattern_key": "gateway.cli_from_session_conflict", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-008"}
{"date": "2026-02-28", "category": "correction", "priority": "medium", "status": "pending", "summary": "set -euo pipefail causes SIGPIPE exit 141 in shell scripts", "details": "gh CLI output piped through grep can cause SIGPIPE when pipe closes early, combined with set -e this kills the script", "action": "Use set -uo pipefail (without -e) for scripts with complex piping, or handle SIGPIPE explicitly", "pattern_key": "shell.pipefail_sigpipe", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-009"}
{"date": "2026-02-28", "category": "best_practice", "priority": "medium", "status": "pending", "summary": "PR-based merge is better than direct push to main", "details": "Using gh pr create + gh pr merge gives audit trail, conflict visibility, and can be automated via cron", "action": "Always use scripts/merge-to-main.sh for main branch updates", "pattern_key": "git.pr_over_direct_push", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-010"}
{"date": "2026-02-28", "category": "gotcha", "priority": "high", "status": "pending", "summary": "merge-to-main.sh used GNU grep -P which breaks on macOS BSD grep", "details": "Script parsed PR number with grep -oP; on macOS this throws invalid option and can falsely report merge success/failure. Replaced with sed-based parser + PR state check.", "action": "Use BSD/GNU portable sed extraction and verify PR state via gh pr view before reporting merged.", "pattern_key": "", "recurrence": 1, "first_seen": "2026-02-28", "last_seen": "2026-02-28", "see_also": [], "promoted_to": null, "id": "LRN-011"}
